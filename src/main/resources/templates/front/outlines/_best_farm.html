<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<section th:fragment="farm">
    <div th:each="farm : farmRank" th:object="${farmRank}">
        <!--<img class="rank-img" th:src="랭킹사진링크">-->
        <a th:href="@{농장링크}">
            <div>
                <strong th:text="#{총판매량}"></strong>
                <p th:text="#{한줄소개}"></p>
            </div>
            <p th:text="#{찜}"></p>
            <img th:src="#{프로필사진링크}">
            <p th:text="#{농장이름}"></p>
        </a>
    </div>
    <!-- 지도 영역 : th:block th:if로 처리 -->
    <div class="kakao_map" id="map" style="width:550px;height:550px;"></div>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=30c3d31753d6d4b0cc09566b021bca87"></script>
    <script>
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div
            mapOption = {
                    center: new kakao.maps.LatLng(35.57369961857038, 128.90045742636414), //지도의 중심좌표.
                    level: 13 //지도의 레벨(확대, 축소 정도)
                };
var map = new kakao.maps.Map(mapContainer, mapOption);

// 여러 개의 마커와 인포윈도우 정보를 가지고 있는 배열
var markerInfos = [
    { position: new kakao.maps.LatLng(33.450701, 126.570667), content: '<div style="padding:5px;">제주도농부 감귤<br><a href="http://localhost:3000/product/fruit" style="color:blue">상품페이지로 이동</a></div>' },
    { position: new kakao.maps.LatLng(35.871363377967015, 128.60212567442213), content: '<div style="padding:5px;">대구농부 찹쌀<br><a href="http://localhost:3000/product/grain" style="color:blue">상품페이지로 이동</a></div>' },
    { position: new kakao.maps.LatLng(36.99102811180967, 127.92615735554446), content: '<div style="padding:5px;">충주농부 사과<br><a href="http://localhost:3000/product/fruit" style="color:blue">상품페이지로 이동</a></div>'},
    // ... 추가적인 마커 정보들
];

// 마커와 인포윈도우를 담을 배열
var markers = [];
var infowindows = [];

// 각 마커 정보에 대해 반복
markerInfos.forEach(function(markerInfo) {
    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({
        position: markerInfo.position
    });

    // 마커가 지도 위에 표시되도록 설정합니다
    marker.setMap(map);

    // 마커를 배열에 추가합니다
    markers.push(marker);

    // 인포윈도우를 생성합니다
    var infowindow = new kakao.maps.InfoWindow({
        position: markerInfo.position,
        content: markerInfo.content
    });

    // 인포윈도우를 배열에 추가합니다
    infowindows.push(infowindow);

    // 인포윈도우를 엽니다
    infowindow.open(map, marker);
});
    </script>

    <div class="main_best">
        <h2>BEST</h2>
        <li><a href="http://localhost:3000/" th:text="#{전체}"></a></li> <!-- 경로 - 지도와 맵핑 해야함 -->
        <li><a href="http://localhost:3000/" th:text="#{곡물}"></a></li>
        <li><a href="http://localhost:3000/" th:text="#{채소}"></a></li>
        <li><a href="http://localhost:3000/" th:text="#{과일}"></a></li>
    </div>
</section>
</html>